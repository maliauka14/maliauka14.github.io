window.onload=function(){let e=document.querySelector("#preloader");e.classList.add("hide-preloader"),setTimeout(function(){e.classList.add("preloader-hidden")},990)},window.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".slider_element"),t=document.querySelector(".theory_active"),o=document.querySelectorAll(".own_theory_data"),n=window.getComputedStyle(e[0]).width;o.forEach(e=>e.style.display="none"),o[0].style.display="",t.style.width=n;let r=o[0],l=e[0];function s(e,t,o,n,r,l){let s=0;const d=document.querySelector(e),c=document.querySelector(t),i=document.querySelectorAll(o),a=document.querySelector(n),u=document.querySelector(r),y=window.getComputedStyle(a).width;u.style.width=Math.round(100/l*i.length)+"%",u.style.display="flex",u.style.transition="0.5s all",a.style.overflow="hidden";let m=Math.round(+y.slice(0,y.length-2)/l);function v(){s<=0||(s-=m),u.style.transform=`translateX(-${s}px)`}function p(){s>=m*(i.length-l)||(s+=m),u.style.transform=`translateX(-${s}px)`}i.forEach(e=>{e.style.width=m+"px"}),d.addEventListener("click",()=>v()),c.addEventListener("click",()=>p()),a.addEventListener("touchstart",function(e){h=e.touches[0].clientX},!1),a.addEventListener("touchmove",function(e){if(null===h)return;let t=e.touches[0].clientX;h-t>0?p():v();h=null},!1);let h=null}l.style["pointer-events"]="none",l.style["font-weight"]="700",e.forEach((e,t)=>{e.addEventListener("click",()=>{r.style.display="none",o[t].style.display="",l.style["font-weight"]="500",e.style["font-weight"]="700",l.style["pointer-events"]="auto",e.style["pointer-events"]="none",l=e,r=o[t]})}),s("#speakers_left_arrow_slider","#speakers_rigth_arrow_slider",".own_speaker","#speakers_slider_wrapper","#speakers_slider_inner",4),s("#partners_left_arrow_slider","#partners_rigth_arrow_slider",".own_partner","#partners_slider_wrapper","#partners_slider_inner",3);const d=document.querySelector(".credential_button");d.addEventListener("click",()=>{const e=document.querySelector("#request_first_name"),t=document.querySelector("#request_last_name"),o=document.querySelector("#request_email");if(e.addEventListener("click",()=>e.style.border=""),t.addEventListener("click",()=>t.style.border=""),o.addEventListener("click",()=>o.style.border=""),"Отправлено"===d.textContent);else{let n=e.value.length>=2,r=/^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i.test(o.value),l=t.value.length>=2;r&&n&&l?(response=fetch("some_url",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({correctFirstName:n,correctEmail:r,correctLastName:l})}),response.ok?(d.classList.add("active_credential_button"),d.innerHTML="Отправлено"):alert("Ошибка HTTP: "+response.status)):(n||(e.style.border="4px solid #d84646"),r||(o.style.border="4px solid #d84646"),l||(t.style.border="4px solid #d84646"))}});const c=document.querySelector(".modal");document.querySelectorAll("[data-modal]").forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",()=>{c.innerHTML=`<img src="img/forum2020/${e.classList[0]}.png" alt="forum_photo">`,c.classList.add("show"),document.body.style.overflow="hidden"})}),c.addEventListener("click",e=>{e.target===c&&(c.classList.remove("show"),c.innerHTML="",document.body.style.overflow="")}),document.addEventListener("keydown",e=>{"Escape"===e.code&&c.classList.contains("show")&&(c.classList.remove("show"),c.innerHTML="",document.body.style.overflow="")}),c.addEventListener("touchstart",a,!1),c.addEventListener("touchmove",u,!1);let i=null;function a(e){i=e.touches[0].clientY}function u(e){if(null===i)return;let t=e.touches[0].clientY,o=i-t;Math.abs(o)>40&&(c.classList.remove("show"),c.innerHTML="",document.body.style.overflow=""),i=null}function y(e,t,o){const n=document.querySelector(".modal"),r=document.querySelector(e),l=document.querySelector(t),s=document.querySelector(o);let d=!1;l.style.display="none",l.addEventListener("click",()=>{r.style.display="block",l.style.display="none",s.pause(),d=!0}),r.addEventListener("click",()=>{r.style.display="none",l.style.display="block",s.play(),d=!1});const c=document.querySelector("#questions"),i=window.pageYOffset+c.getBoundingClientRect().top;window.addEventListener("scroll",()=>{window.pageYOffset+document.documentElement.clientHeight-i+205>0&&!d?(s.play(),r.style.display="none",l.style.display="block"):(s.pause(),r.style.display="block",l.style.display="none")}),s.addEventListener("click",e=>{e.target===s&&(n.classList.add("show"),document.body.style.overflow="hidden",n.innerHTML=`\n                    <video  class="open_video" controls autoplay>\n                        <source src=${s.currentSrc} type="video/mp4">\n                    </video>`)})}y("#left_play","#left_pause","#left_video"),y("#rigth_play","#rigth_pause","#rigth_video");const m=document.querySelectorAll('a[href^="#"]');for(let e of m)e.addEventListener("click",function(t){t.preventDefault();const o=e.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})});const v=document.querySelectorAll(".send_request"),p=document.querySelector(".modal_send_request"),h=document.querySelector("#request_button");let _;v.forEach(e=>{e.addEventListener("click",()=>{p.classList.add("show"),document.body.style.overflow="hidden",_=e.id})}),p.addEventListener("click",e=>{e.target===p&&(p.classList.remove("show"),document.body.style.overflow="")}),document.addEventListener("keydown",e=>{"Escape"===e.code&&p.classList.contains("show")&&(p.classList.remove("show"),document.body.style.overflow="")}),p.addEventListener("touchstart",a,!1),p.addEventListener("touchmove",u,!1),h.addEventListener("click",()=>{const e=document.querySelector("#request_company_name"),t=document.querySelector("#request_contact_name"),o=document.querySelector("#request_phone"),n={partner_button:"Хочу стать партнёром форума Осознанное родительство",official_partner_button:"Хочу стать официальным партнёром форума Осознанное родительство",general_partner_button:"Хочу стать генеральным партнёром форума Осознанное родительство"};e.addEventListener("click",()=>e.style.border=""),t.addEventListener("click",()=>t.style.border=""),o.addEventListener("click",()=>o.style.border="");let r=e.value.length>=3,l=/(?:\+|\d)[\d\-\(\) ]{9,}\d/g.test(o.value),s=t.value.length>=2;if(l&&r&&s){c.classList.remove("show"),c.innerHTML="",document.body.style.overflow="";let r=`Добрый день. Наша компания хочет поддержать ваш проект осозданное родительство.\n            \nНаша компания: ${e.value}.\n            \nДля связи с нами просим набрать на номер ${o.value}, контактное лицо: ${t.value}.\n            \nСпасибо.`;p.classList.remove("show"),document.body.style.overflow="",window.open(`mailto:malyavko14@bk.ru?subject=${n[_]}&body=${encodeURIComponent(r)}`,"_blank")}else r||(e.style.border="4px solid #d84646"),l||(o.style.border="4px solid #d84646"),s||(t.style.border="4px solid #d84646")});const f=document.querySelector(".header_menu"),w=document.querySelectorAll(".nav_element"),L=document.querySelector(".hamburger");L.addEventListener("click",()=>{L.classList.toggle("hamburger_active"),f.classList.toggle("header_menu_active")}),w.forEach(e=>{e.addEventListener("click",()=>{L.classList.toggle("hamburger_active"),f.classList.toggle("header_menu_active")})})});